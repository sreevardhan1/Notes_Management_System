{% extends "main.html" %}
{% block title %} Login - Flash Notes {% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-6 col-lg-5">
    <div class="card p-4">
      <div class="text-center mb-3">
        <img src="{{ url_for('static', filename='images/Notes_logo.png') }}" alt="logo" class="login-logo">
      </div>

      <h3 class="text-center mb-3">Login</h3>

      <!-- Credentials Login Form -->
      <form id="credForm" method="POST" action="{{ url_for('login') }}">

        <div class="mb-3">
          <label class="form-label">Username</label>
          <input class="form-control" name="username" required>
        </div>

        <div class="mb-3">
          <label class="form-label">Password</label>
          <input type="password" class="form-control" name="password" required>
        </div>

        <!-- CAPTCHA Block -->
        <div class="mb-2 d-flex align-items-center gap-2">
          <img id="captchaImg" src="{{ url_for('captcha') }}"
               alt="captcha"
               style="height:56px; border-radius:6px;">
          <button type="button"
                  class="btn btn-outline-secondary btn-sm"
                  onclick="refreshCaptcha()">â†»</button>
        </div>

        <div class="mb-3">
          <label class="form-label">Enter CAPTCHA</label>
          <input class="form-control"
                 name="captcha"
                 placeholder="Type the text from image"
                 required>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-2">
          <div>
            <input type="checkbox" name="remember" id="remember">
            <label for="remember">Remember me</label>
          </div>
          <a href="{{ url_for('forgot') }}">Forgot Password?</a>
        </div>

        <button class="btn btn-primary w-100">Login</button>
      </form>

      <div class="mt-3 text-center">
        <p class="mb-1">
          Don't have an account?
          <a href="{{ url_for('register') }}">Register</a>
        </p>
      </div>
    </div>

  </div>
</div>

<script>
// Refresh captcha
function refreshCaptcha() {
  document.getElementById('captchaImg').src =
    "{{ url_for('captcha') }}?t=" + Date.now();
}
</script>

{% endblock %}
